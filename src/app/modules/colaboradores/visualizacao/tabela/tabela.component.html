<div class="col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12 table_container">

    <table class="col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12 table table-dark"
        [ngClass]="{'mat-elevation-z8': verificaSeConteudoMaiorQueZero()}">

        <caption></caption>

        <thead class="row col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12 thead">

            <div [ngClass]="{ 'thead_info_empty': pageableInfo == null || pageableInfo.content.length == 0 }"
                class="row thead_info col-xl-12 col-lg-12 col-md-12 col-sm-12">

                <div class="row thead_info_icon_container col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12">

                    <div class="row bt_header_upper_container col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12">

                        <div *ngIf="pageableInfo != null" class="bt_header_container page_size_container">
                            <select [(ngModel)]="pageableInfo.pageSize" *ngIf="verificaSeConteudoMaiorQueZero()"
                                class="bt_header bt_header_select col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12"
                                (change)="alteraQuantidadeItensExibidosPorPagina()">
                                <option value="5" class="bt_header_option">5</option>
                                <option value="10" class="bt_header_option"
                                    [disabled]="pageableInfo.totalElements > 5 ? false : true">
                                    10
                                </option>
                                <option value="20" class="bt_header_option"
                                    [disabled]="pageableInfo.totalElements > 10 ? false : true">
                                    20
                                </option>
                                <option value="50" class="bt_header_option"
                                    [disabled]="pageableInfo.totalElements > 20 ? false : true">
                                    50
                                </option>
                            </select>
                        </div>

                        <div class="bt_header_container">
                            <div class="row bt_header bt_header_novo col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12"
                                [ngClass]="{ 'btHeaderComPaddingAjustado': (pageableInfo == null || pageableInfo.content.length == 0) }"
                                matTooltip='Adicionar novo item' matTooltipPosition="above"
                                routerLink="/colaboradores/novo">
                                <h5 class="text_novo col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12">
                                    <i class="bi bi-file-earmark-plus-fill header_icon"></i>
                                </h5>
                            </div>
                        </div>

                        <div *ngIf="pageableInfo != null" class="bt_header_container">
                            <div class="row bt_header bt_header_novo col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12"
                                [ngClass]="{ 'btHeaderComPaddingAjustado': (pageableInfo == null || pageableInfo.content.length == 0) }"
                                [ngClass]="{ 'matBadgeInactive': pageableInfo == null }" (click)="geraRelatorio()"
                                [matBadge]="colaboradoresSelecionadosNaTabela.length > 0 ? colaboradoresSelecionadosNaTabela.length : null"
                                [matTooltip]="colaboradoresSelecionadosNaTabela.length > 0 ? 'Gerar relatório em PDF' : 'Gerar relatório geral em PDF'"
                                matBadgePosition="after" matBadgeSize="medium" matBadgeColor="accent"
                                matTooltipPosition="above">
                                <h5 class="text_novo col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12">
                                    <i class="bi bi-file-pdf-fill header_icon"></i>
                                </h5>
                            </div>
                        </div>

                        <div *ngIf="pageableInfo != null" class="bt_header_container">
                            <div class="row bt_header bt_header_novo col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12"
                                [ngClass]="{ 'btHeaderComPaddingAjustado': (pageableInfo == null || pageableInfo.content.length == 0) }"
                                [ngClass]="{'matBadgeInactive': colaboradoresSelecionadosNaTabela.length == 0}"
                                [matBadge]="colaboradoresSelecionadosNaTabela.length > 0 ? colaboradoresSelecionadosNaTabela.length : null"
                                [matTooltip]="colaboradoresSelecionadosNaTabela.length > 0 ? 'Remover itens' : null"
                                matBadgePosition="after" matBadgeSize="medium" matBadgeColor="accent"
                                matTooltipPosition="above" (click)="excluiColaboradoresEmMassa()">
                                <h5 class="text_novo col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12">
                                    <i class="bi bi-file-earmark-x-fill header_icon"></i>
                                </h5>
                            </div>
                        </div>

                    </div>

                    <div *ngIf="pageableInfo != null"
                        class="input_filtro_container col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12">
                        <div
                            class="sub_container input_filtro_subcontainer col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12">
                            <div class="input_block col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12">
                                <div class="input_icon">
                                    <mat-icon fontIcon="search" class="icone icone_filtro"></mat-icon>
                                </div>
                                <input class="input_busca" type="search"
                                    placeholder="Busca por nome, e-mail, cpf, etc..." autocomplete="off"
                                    spellcheck="false" [formControl]="buscaColaboradores" />
                            </div>
                        </div>
                    </div>

                    <h5 *ngIf="verificaSeConteudoMaiorQueZero()"
                        class="quantidade_exibida col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12">
                        Página {{ pageableInfo.pageNumber+1 }} de {{ pageableInfo.totalPages }} | {{
                        pageableInfo.totalElements }}
                        Colaboradores encontrados
                    </h5>
                </div>

            </div>

            <hr class="hr_thead">

            <tr *ngIf="verificaSeConteudoMaiorQueZero()"
                class="tr_titulo col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12">

                <th class="th th_checkbox">
                    <input (click)="checkAll()" [checked]="botaoCheckAllHabilitado" type="checkbox" id="customCheck"
                        name="example1">
                </th>
                <th class="th th_expande">
                    <mat-icon (click)="alteraOrdenacao()" class="icon_expand_all" fontIcon="unfold_more"></mat-icon>
                </th>
                <th class="th th_nome">
                    NOME
                </th>
                <th class="th th_cpfCnpj">
                    CPF/CNPJ
                </th>
                <th class="th th_status">
                    STATUS
                </th>
                <th class="th th_matricula">
                    MATRICULA
                </th>
                <th class="th th_ocupacao">
                    CARGO
                </th>
                <th class="th th_acoes">

                </th>

            </tr>

        </thead>

        <tbody *ngIf="pageableInfo != null; else: loadBarTabela" class="col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12">

            <div *ngIf="verificaSeConteudoMaiorQueZero(); else: tabelaVazia"
                class="col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12 linha_tabela_container">
                <div *ngFor="let colaborador of pageableInfo.content; let i = index"
                    [ngClass]="{'linha_tabela_expandida': colaborador.expanded}"
                    class="col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12 linha_tabela">

                    <tr class="col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12">

                        <td class="td td_checkbox">
                            <input (click)="alteraEstadoCheckTabela(i)" [checked]="colaborador.checked" type="checkbox"
                                class="checkbox">
                        </td>

                        <td class="td td_expande">
                            <i (click)="alteraEstadoExpansaoTabela(i)"
                                [ngClass]="{'fa-chevron-right': !colaborador.expanded, 'fa-chevron-down': colaborador.expanded}"
                                class="icone icone_expand fas fa-solid" id="{{ 'linha-' + i }}" data-toggle="collapse"
                                [attr.href]="'#collapse-' + i"></i>
                        </td>

                        <td class="td td_nome">
                            <div class="nome_colaborador">
                                {{
                                (colaborador.nome.length > 14)
                                ? (colaborador.nome | slice:0:14)+'...'
                                : (colaborador.nome)
                                }}
                            </div>
                        </td>

                        <td class="td td_cpfCnpj">
                            {{ (colaborador.cpfCnpj != null ? colaborador.cpfCnpj : '-' ) }}
                        </td>

                        <td class="td td_status">
                            <span [ngClass]="{'success_text': colaborador.statusColaboradorEnum == 'ATIVO', 
                                'warn_text': colaborador.statusColaboradorEnum == 'AFASTADO' || colaborador.statusColaboradorEnum == 'FERIAS',
                                'error_text': colaborador.statusColaboradorEnum == 'DISPENSADO' || colaborador.statusColaboradorEnum == 'EXCLUIDO',
                                'common_text': colaborador.statusColaboradorEnum == 'FREELANCER'}">
                                {{ colaborador.statusColaboradorEnum | titlecase }}
                            </span>
                        </td>

                        <td class="td td_matricula">
                            {{ colaborador.matricula }}
                        </td>

                        <td class="td td_ocupacao">
                            {{ (colaborador.ocupacao | slice:0:14) }}
                        </td>

                        <td class="td td_acoes">
                            <div class="row col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12 icon_container">
                                <mat-icon fontIcon="more_vert"
                                    class="icone icone_tabela icone_tabela_remove dropdown dropleft float-right"
                                    data-toggle="dropdown"></mat-icon>
                                <div class="dropdown-menu">
                                    <a class="dropdown-item" [routerLink]="'/colaboradores/' + colaborador.id">
                                        Editar
                                    </a>
                                    <a (click)="excluiColaborador(colaborador.id)" class="dropdown-item">
                                        Excluir
                                    </a>
                                </div>
                            </div>
                        </td>

                    </tr>

                    <!-- ACCORDION -->
                    <div [@fadeInOut] *ngIf="colaborador.expanded" id="{{ 'collapse-' + i }}"
                        class="col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12 " [attr.href]="'#linha-' + i"
                        [attr.data-parent]="'#linha-' + i">

                        <div class="col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12 card-body accordion_container">

                            <div class="row col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12 accordion_linha_principal">

                                <div class="col-xl-4 col-lg-4 col-md-4 col-sm-6 col-12 accordion_bloco">
                                    <div class="row col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12 accordion_subbloco">
                                        <div
                                            class="col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12 accordion_subbloco_titulo">
                                            <h3 class="col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12 accordion_titulo">
                                                Responsável pelo
                                                cadastro:</h3>
                                        </div>
                                        <div
                                            class="col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12 accordion_subbloco_texto">
                                            <p class="col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12 accordion_texto">
                                                Teste
                                            </p>
                                        </div>
                                    </div>
                                </div>

                                <div class="col-xl-4 col-lg-4 col-md-4 col-sm-6 col-12 accordion_bloco">
                                    <div class="row col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12 accordion_subbloco">
                                        <div
                                            class="col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12 accordion_subbloco_titulo">
                                            <h3 class="col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12 accordion_titulo">
                                                Data do cadastro:</h3>
                                        </div>
                                        <div
                                            class="col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12 accordion_subbloco_texto">
                                            <p class="col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12 accordion_texto">
                                                {{ colaborador.dataCadastro | date: 'dd/MM/yyyy' }} às {{
                                                colaborador.horaCadastro | slice:0:5}}
                                            </p>
                                        </div>
                                    </div>
                                </div>

                                <div class="col-xl-4 col-lg-4 col-md-4 col-sm-6 col-12 accordion_bloco">
                                    <div class="row col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12 accordion_subbloco">
                                        <div
                                            class="col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12 accordion_subbloco_titulo">
                                            <h3 class="col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12 accordion_titulo">
                                                E-mail:</h3>
                                        </div>
                                        <div
                                            class="col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12 accordion_subbloco_texto">
                                            <p class="col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12 accordion_texto">
                                                {{ (colaborador.email != null && colaborador.email != '')
                                                ? (colaborador.email)
                                                : '-'}}
                                            </p>
                                        </div>
                                    </div>
                                </div>

                                <div class="col-xl-4 col-lg-4 col-md-4 col-sm-6 col-12 accordion_bloco">
                                    <div class="row col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12 accordion_subbloco">
                                        <div
                                            class="col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12 accordion_subbloco_titulo">
                                            <h3 class="col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12 accordion_titulo">
                                                Data de nascimento:
                                            </h3>
                                        </div>
                                        <div
                                            class="col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12 accordion_subbloco_texto">
                                            <p class="col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12 accordion_texto">
                                                {{ (colaborador.dataNascimento != null && colaborador.dataNascimento !=
                                                '')
                                                ? (colaborador.dataNascimento | date: 'dd/MM/yyyy')
                                                : '-'}}
                                            </p>
                                        </div>
                                    </div>
                                </div>

                                <div class="col-xl-4 col-lg-4 col-md-4 col-sm-6 col-12 accordion_bloco">
                                    <div class="row col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12 accordion_subbloco">
                                        <div
                                            class="col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12 accordion_subbloco_titulo">
                                            <h3 class="col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12 accordion_titulo">
                                                Inscrição estadual:
                                            </h3>
                                        </div>
                                        <div
                                            class="col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12 accordion_subbloco_texto">
                                            <p class="col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12 accordion_texto">
                                                Teste
                                            </p>
                                        </div>
                                    </div>
                                </div>

                                <div class="col-xl-4 col-lg-4 col-md-4 col-sm-6 col-12 accordion_bloco">
                                    <div class="row col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12 accordion_subbloco">
                                        <div
                                            class="col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12 accordion_subbloco_titulo">
                                            <h3 class="col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12 accordion_titulo">
                                                Giro total:</h3>
                                        </div>
                                        <div
                                            class="col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12 accordion_subbloco_texto">
                                            <p class="col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12 accordion_texto">
                                                Teste
                                            </p>
                                        </div>
                                    </div>
                                </div>

                                <div class="col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12 accordion_bloco">
                                    <div class="row col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12 accordion_subbloco">
                                        <div
                                            class="col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12 accordion_subbloco_titulo">
                                            <h3 class="col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12 accordion_titulo">
                                                Endereço:</h3>
                                        </div>
                                        <div
                                            class="col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12 accordion_subbloco_texto">
                                            <p class="col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12 accordion_texto">
                                                {{ trataEnderecoTabela(colaborador.endereco) }}
                                            </p>
                                        </div>
                                    </div>
                                </div>

                            </div>

                        </div>
                    </div>

                </div>

            </div>

            <ng-template #tabelaVazia>
                <div class="tabela_vazia_container col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12">
                    Nenhum colaborador foi encontrado.
                </div>
            </ng-template>

        </tbody>

        <ng-template #loadBarTabela>
            <mat-progress-bar class="col-xl-9 col-lg-9 col-md-9 col-sm-9 col-9 load-bar-tabela"
                mode="indeterminate"></mat-progress-bar>
        </ng-template>

        <div *ngIf="verificaSeConteudoMaiorQueZero()"
            class="col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12 pagination_container">
            <ul *ngIf="pageableInfo.totalPages > 1" class="pagination pagination-sm justify-content-end">
                <li (click)="voltarPagina()" [ngClass]="{'disabled': pageableInfo.pageNumber == 0}" class="page-item"><a
                        class="page-link">{{ geraBotaoVoltarPaginacao() }}</a></li>
                <ng-container
                    *ngFor="let numero of GeraNumerosParaNavegarNaPaginacao(pageableInfo.totalPages); let i = index">
                    <li *ngIf="(pageableInfo.pageNumber - i) <= 3 && (pageableInfo.pageNumber - i) >= 0
            || (i - pageableInfo.pageNumber) <= 3 && (i - pageableInfo.pageNumber) >= 0
            || pageableInfo.pageNumber == 0 && (i - pageableInfo.pageNumber) <= 6 && (i - pageableInfo.pageNumber) >= 0
            || pageableInfo.pageNumber == 1 && (i - pageableInfo.pageNumber) <= 5 && (i - pageableInfo.pageNumber) >= 0
            || pageableInfo.pageNumber == 2 && (i - pageableInfo.pageNumber) <= 4 && (i - pageableInfo.pageNumber) >= 0
            || (pageableInfo.pageNumber == (pageableInfo.totalPages-1)) && (pageableInfo.pageNumber - i) <= 6
            || (pageableInfo.pageNumber == (pageableInfo.totalPages-2)) && (pageableInfo.pageNumber - i) <= 5
            || (pageableInfo.pageNumber == (pageableInfo.totalPages-3)) && (pageableInfo.pageNumber - i) <= 4"
                        (click)="selecionarPagina(i)" [ngClass]="{'active': pageableInfo.pageNumber == i}"
                        class="page-item">
                        <a class="page-link">{{ i+1 }}</a>
                    </li>
                </ng-container>
                <li (click)="avancarPagina()"
                    [ngClass]="{'disabled': pageableInfo.pageNumber == pageableInfo.totalPages-1}" class="page-item"><a
                        class="page-link">{{ geraBotaoAvancarPaginacao() }}</a></li>
            </ul>
        </div>
        
    </table>

</div>